version: 2
models:
  - name: stg_segment_profiles__pages
    description: >
      This is a base model for Segment's web page views table. It does some straightforward renaming and
      parsing of Segment raw data in this table.
      If a page view id has multiple entries in the source table then deduplication is done to keep the
      row with the earliest `received_at` timestamp.
    columns:
      - name: utm_source
        description: UTM source parameter
        config:
          meta: {}
          tags: []
      - name: utm_medium
        description: UTM medium parameter
        config:
          meta: {}
          tags: []
      - name: utm_campaign
        description: UTM campaign parameter
        config:
          meta: {}
          tags: []
      - name: utm_term
        description: UTM term parameter
        config:
          meta: {}
          tags: []
      - name: utm_content
        description: UTM content parameter
        config:
          meta: {}
          tags: []
      - name: utm_id
        description: UTM campaign ID
        config:
          meta: {}
          tags: []
      - name: ip
        description: IP address of the user
        config:
          meta: {}
          tags: []
      - name: library_name
        description: Name of the Segment library sending the event
        config:
          meta: {}
          tags: []
      - name: context_library_version
        description: Version of the Segment library
        config:
          meta: {}
          tags: []
      - name: context_locale
        description: User’s locale setting (e.g., en-US, de-DE)
        config:
          meta: {}
          tags: []
      - name: page_url_path
        description: Path of the page URL (excluding domain and query string)
        config:
          meta: {}
          tags: []
      - name: context_page_title
        description: Title of the page from the HTML document
        config:
          meta: {}
          tags: []
      - name: context_protocols_source_id
        description: Internal identifier from Segment protocols
        config:
          meta: {}
          tags: []
      - name: context_timezone
        description: User’s timezone (e.g., Europe/Berlin)
        config:
          meta: {}
          tags: []
      - name: user_agent
        description: Raw User-Agent string from the browser
        config:
          meta: {}
          tags: []
      - name: context_user_agent_data_brands
        description: JSON metadata about the browser family/version
        config:
          meta: {}
          tags: []
      - name: context_user_agent_data_mobile
        description: Flag indicating whether the device is mobile
        config:
          meta: {}
          tags: []
      - name: context_user_agent_data_platform
        description: User-Agent platform (e.g., macOS, Linux, Windows)
        config:
          meta: {}
          tags: []
      - name: event_source_id
        description: Internal identifier for the event source
        config:
          meta: {}
          tags: []
      - name: source_name
        description: Name of the event source
        config:
          meta: {}
          tags: []
      - name: event_source_slug
        description: Slugified version of the event source name
        config:
          meta: {}
          tags: []
      - name: id
        data_tests:
          - unique
          - not_null
        description: Unique identifier for the page view event
        config:
          meta: {}
          tags: []
      - name: loaded_at
        description: Timestamp when the row was loaded into the warehouse
        config:
          meta: {}
          tags: []
      - name: original_timestamp
        description: Original event timestamp from the client
        config:
          meta: {}
          tags: []
      - name: event_name
        description: Name of the event (e.g., "page_view")
        config:
          meta: {}
          tags: []
      - name: page_path
        description: Path portion of the page URL (may duplicate `page_url_path`)
        config:
          meta: {}
          tags: []
      - name: received_at_tstamp
        description: Timestamp when Segment received the event
        config:
          meta: {}
          tags: []
      - name: referrer
        description: Full referrer URL from which the user navigated
        config:
          meta: {}
          tags: []
      - name: page_url_query
        description: Query string from the page URL
        config:
          meta: {}
          tags: []
      - name: segment_id
        description: Unique Segment identifier for the event
        config:
          meta: {}
          tags: []
      - name: sent_at
        description: Timestamp when the event was sent by the client
        config:
          meta: {}
          tags: []
      - name: tstamp
        description: Timestamp recorded by the warehouse
        config:
          meta: {}
          tags: []
      - name: page_title
        description: Title of the page (duplicate of `context_page_title`)
        config:
          meta: {}
          tags: []
      - name: page_url
        description: Full page URL (protocol + domain + path + query)
        config:
          meta: {}
          tags: []
      - name: user_id
        description: Segment user_id (if logged in)
        config:
          meta: {}
          tags: []
      - name: uuid_ts
        description: Technical field combining UUID and timestamp
        config:
          meta: {}
          tags: []
      - name: anonymous_id
        description: Segment anonymous_id (cookie/device ID)
        config:
          meta: {}
          tags: []
      - name: context_actions_amplitude_session_id
        description: Amplitude session ID if available
        config:
          meta: {}
          tags: []
      - name: page_url_host
        description: Host/domain of the page URL
        config:
          meta: {}
          tags: []
      - name: referrer_host
        description: Host/domain of the referrer URL
        config:
          meta: {}
          tags: []
      - name: registered_domain
        description: Registered domain
        config:
          meta: {}
          tags: []
