version: 2
models:
  - name: fct_donated
    description: Fact table for donations.
    columns:
      - name: id
        data_type: STRING
        tests:
          - not_null
          - unique
        config:
          meta: {}
          tags: []
        description: Unique identifier for this donation record.
      - name: fk__dim1_users
        data_type: STRING
        tests:
          - not_null
          - relationships:
              field: canonical_segment_id
              to: ref('dim1_users')
        config:
          meta: {}
          tags: []
        description: >-
          Foreign key to Users dimension (Canonical Segment ID). Links the donation to the unified user
          profile.
      - name: fk__dim1_products
        description: ''
        config:
          meta: {}
          tags: []
      - name: fk__dim1_attribution
        description: >-
          Foreign key to attribution dimension for the channel grouping, generated from referrer source
          + medium.
        config:
          meta: {}
          tags: []
        data_tests:
          - not_null
      - name: donated_amount
        description: ''
        config:
          meta: {}
          tags: []
      - name: market_spend_amount
        description: ''
        config:
          meta: {}
          tags: []
      - name: donation_count
        data_type: INT64
        config:
          meta: {}
          tags: []
        description: Count of donation events included in this record.
      - name: market_transaction_count
        description: ''
        config:
          meta: {}
          tags: []
      - name: record_date
        data_type: DATE
        config:
          meta: {}
          tags: []
        description: Date of the donation record, used for time-based analysis.
      - name: recipient_brink_count
        data_type: INT64
        config:
          meta: {}
          tags: []
        description: Count of donations where the recipient was categorized as "Brink".
      - name: recipient_shefi_count
        data_type: INT64
        config:
          meta: {}
          tags: []
        description: Count of donations where the recipient was categorized as "Shefi".
