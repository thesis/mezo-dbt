version: 2
models:
  - name: fct_donated
    description: Fact table for donations.
    columns:
      - name: id
        data_type: STRING
        tests:
          - not_null
          - unique
        config:
          meta: {}
          tags: []
        description: Unique identifier for this donation record.
      - name: fk__dim1_users
        data_type: STRING
        tests:
          - not_null
          - relationships:
              field: canonical_segment_id
              to: ref('dim1_users')
        config:
          meta: {}
          tags: []
        description: Foreign key to Users dimension (Canonical Segment ID). Links the donation to the unified user profile.
      - name: amount
        data_type: NUMERIC
        config:
          meta: {}
          tags: []
        description: Amount that was donated (normalized currency).
      - name: donation_count
        data_type: INT64
        config:
          meta: {}
          tags: []
        description: Count of donation events included in this record.
      - name: record_date
        data_type: DATE
        config:
          meta: {}
          tags: []
        description: Date of the donation record, used for time-based analysis.
      - name: recipient_brink_count
        data_type: INT64
        config:
          meta: {}
          tags: []
        description: Count of donations where the recipient was categorized as "Brink".
      - name: recipient_shefi_count
        data_type: INT64
        config:
          meta: {}
          tags: []
        description: Count of donations where the recipient was categorized as "Shefi".
